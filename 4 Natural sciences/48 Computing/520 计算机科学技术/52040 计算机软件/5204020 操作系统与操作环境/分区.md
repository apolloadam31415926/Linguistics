# 定义
理论无限制:理想条件下技术上没有限制,但是真实环境下受到外部条件的影响无法达到理论可能
e.g. 就像1块1G磁盘空间上的分区表不可能超过1G

# 分区表
- 作用:分区表位于磁盘的起始位置，用于管理整个磁盘的分区信息。它记录了每个分区的起始扇区、大小、类型等信息。
- 管理对象:分区表管理的是物理磁盘上的分区，它将一个物理磁盘划分为多个逻辑分区。[^1]
- 表格形式:分区表本质上也是一个表格，每一行代表一个分区，包含分区的各种属性信息。
- 类型： 常见的分区表类型有 MBR 和 GPT

# 文件系统
- 作用:文件系统位于每个分区之上，用于管理该分区内的文件和目录。它定义了文件在分区上的存储方式、组织结构、访问权限等。
- 管理对象:文件系统管理的是逻辑分区上的文件和目录，它决定了文件如何存储、读取和管理
- 表格形式:文件系统也使用表格来管理文件和目录，例如 inode 表、目录项表等。
- 类型:常见的文件系统类型有 FAT32、NTFS、Ext4、APFS 等。

逻辑分区/物理分区  对立概念 (此处说的逻辑并非是MBR下扩展分区的逻辑分区)
逻辑分区:是1块盘上面人为的定义了几个分区,大小,数量可定义
    - 同一块盘上的分区仅仅是逻辑分区
物理分区:如果有两块盘,单独看单块盘的大小那么这两块盘是物理分区//个人理解
    - 不同的盘上的分区不仅仅是逻辑分区也是物理分区

## MBR 与 GPT

两者都是分区表

不同的是
|分区表|支持分区表大小|支持分区大小|支持分区数|
|---|---|---|---|
|MBR|512字节|低于2T|最多支持4个主分区|
|GPT|理论无限制|理论无限制|最多支持128个分区|

个人猜想:
关于分区数量MBR可以通过扩展分区解决,但是分区大小的问题无法解决
而随着硬盘发展,分区大小问题无法避免,于是有了GPT用于替代MBR的分区表格式/标准

### MBR下的相关概念

|分区类型|主要作用|数量限制|是否可直接引导|间接引导|
|---|---|---|---|---|
|主分区|安装操作系统|最多四个|是|-|
|扩展分区|划分逻辑分区|最多一个|否|否|
|逻辑分区|存储数据|无限制|否|是|

[^1]:应当注意此处的逻辑分区与MBR下的逻辑分区的概念相互区分。需要结合语境分析

这个名字起的不是很好 实际上中文中 主/次是对立的。

主分区就是直接划分的分区 次分区就是从扩展分区中划分的分区 这样就对立起来了，也不会有概念上的模糊歧义。

MBR 下关于第一个分区默认是33号,中间空了32个扇区 保留用于扩展或其他用途 

#### MBR下的GRUB
当系统盘是MBR分区表且安装了GRUB时，MBR中的引导程序与GRUB中的引导程序之间存在着密切的合作关系，它们共同完成了操作系统的启动过程

- 第一阶段引导： 当计算机启动时，BIOS会首先加载MBR中的引导程序。
    - 查找活动分区： MBR中的引导程序会检查分区表，找到被标记为活动的分区（通常是安装了操作系统引导加载程序的分区）。
    - 加载并执行下一阶段引导程序： 将控制权交给活动分区的引导扇区中的引导程序。
- 第二阶段引导： GRUB接管控制权后，会加载GRUB的核心模块。
    - 提供启动菜单： GRUB会显示一个启动菜单，允许用户选择要启动的操作系统
    - 加载操作系统内核： 根据用户的选择，GRUB会加载相应的操作系统内核到内存中。

安装Grub时 修改了MBR表，将其引导至Grub所在分区?? 

### GPT下的相关概念
|分区类型|主要作用|文件系统|数量限制|是否可直接引导|间接引导|
|---|---|---|---|---|
|ESP分区|启动分区 用于引导系统|只能是FAT32|-|-|-|
|MSR分区|windows特有的保留分区|MSR文件系统|-|-|-|
|非ESP分区|存储数据 根据是否存储系统可以进一步分划分||否|-|-|

ESP看上去与MBR中的引导代码功能类似都是初期引导程序
MSRwindows












# 杂项
从x的角度看是逻辑的 相对概念
从y的角度看是物理的

LVM 逻辑卷管理 与MBR 和GPT无关
物理分区/逻辑分区的方法
可能是人们对于分区表数量需求的变化导致的

